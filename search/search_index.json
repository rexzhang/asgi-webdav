{"config":{"lang":["en","zh"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"changelog/","title":"Changelog","text":""},{"location":"changelog/#170","title":"1.7.0","text":"<ul> <li>Broken change:</li> <li>remove brotli support</li> <li>feat: support zstd compression in response</li> <li>chore: update xmltodict to v1.0.2</li> </ul>"},{"location":"changelog/#161-20251101","title":"1.6.1 - 20251101","text":"<ul> <li>fix(docker): ldap depend miss</li> </ul>"},{"location":"changelog/#160-20251031","title":"1.6.0 - 20251031","text":"<ul> <li>feat: new config, <code>HTTPBasicAuth.cache_timeout</code></li> <li>Optionally expire authentication cache entries after a defined time, thanks PIC</li> <li>feat: new config, <code>Compression.enable</code></li> <li>feat: both support <code>.toml</code> and <code>.json</code> config file</li> <li>feat: support optional anonymous user, thanks PIC's idea</li> <li>feat: Implement a WebHDFS provider, contributed by PIC</li> </ul>"},{"location":"changelog/#150-20250628","title":"1.5.0 - 20250628","text":"<ul> <li>Breaking Change</li> <li>feat: <code>config.Provider</code> has new <code>ignore_property_extra</code> poperty, default is <code>True</code></li> <li>Allow authenticating any user from LDAP server, thanks PIC</li> <li>feat: better timezone support, get timezone from env <code>TZ</code></li> <li>feat: <code>HTTPBasicAuth</code>'s cache is now configurable</li> </ul>"},{"location":"changelog/#142-20250424","title":"1.4.2 - 20250424","text":"<ul> <li>Fix, ensure expected HTTP response header is included in responses, thanks SilviaSWR</li> <li>Add, handle non-existing parent folder, thanks SilviaSWR</li> </ul>"},{"location":"changelog/#141-20240626","title":"1.4.1 - 20240626","text":"<ul> <li>Add, config in-container host,port and configfile by env, thanks bonjour-py</li> <li>Add, push docker image to ghcr by github action, thanks bonjour-py</li> </ul>"},{"location":"changelog/#140-20240319","title":"1.4.0 - 20240319","text":"<ul> <li>Add a dead simple implementation for \"read only\" mode, it's not a WebDAV's ACL \"read only\"</li> <li>Add, take query_string from ASGI scope to DAVRequest</li> <li>Add, DAVRequest support all HTTP method, include POST and UNKNOWN</li> <li>Add, new config for logging</li> <li>Update, optimization <code>HideFileInDir</code> logic</li> <li>Update client user-agent regex</li> <li>Upgrade xmltodict to 0.13.x</li> <li>Update pydantic to 2.4+</li> <li>Update docs</li> </ul>"},{"location":"changelog/#132-2022-10-08","title":"1.3.2 - 2022-10-08","text":"<ul> <li>Fix method PROPFIND's compatibility(litmus/0.13 neon/0.31.2)</li> </ul>"},{"location":"changelog/#131-2022-09-30","title":"1.3.1 - 2022-09-30","text":"<ul> <li>Add ARMv7 into Docker targets</li> </ul>"},{"location":"changelog/#130-2022-09-30","title":"1.3.0 - 2022-09-30","text":"<ul> <li>Add <code>examples.work_together_with_other_asgi_app.py</code>, thanks davidbrochart</li> <li>LDAP is now optional</li> <li>uvicorn is now optional</li> <li><code>FileSystemProvider</code> uses more aiofiles API</li> <li>Change <code>DAVRequest.depth</code>'s default value from <code>DAVDepth.infinity</code> to DAVDepth.d0</li> <li>PROPFIND will return 200 if only one DAV property response in the return</li> </ul>"},{"location":"changelog/#120-2022-06-20","title":"1.2.0 - 2022-06-20","text":"<ul> <li>Broken change</li> <li>Change <code>Config.compression.user_content_type_rule</code> to <code>Config.compression.content_type_user_rule</code></li> <li>Add more support for HTTP header: Range</li> <li>Fix HTTP Digest rules checker</li> <li>Add a new property <code>DAVResponse.compression_method</code></li> </ul>"},{"location":"changelog/#110-2022-06-05","title":"1.1.0 - 2022-06-05","text":"<ul> <li>Add new feature: CORS</li> <li>Reduce Docker image size</li> </ul>"},{"location":"changelog/#100-2022-03-09","title":"1.0.0 - 2022-03-09","text":"<ul> <li>Broken change</li> <li>Remove feature: DirBrowserIgnore</li> <li>Change docker base image from slim -&gt; alpine,</li> <li>Add non-root support in docker container</li> <li>Add new feature: hide file in directory</li> <li>Add hashlib mode for stored password</li> <li>Add HTTP Digest mode for stored password</li> <li>Add LDAP mode for stored password</li> </ul>"},{"location":"changelog/#091-2021-08-02","title":"0.9.1 - 2021-08-02","text":"<ul> <li>Fix bug</li> </ul>"},{"location":"changelog/#090-2021-08-02","title":"0.9.0 - 2021-08-02","text":"<ul> <li>Add Config.http_digest_auth.enable_rule</li> </ul>"},{"location":"changelog/#081-2021-07-30","title":"0.8.1 - 2021-07-30","text":"<ul> <li>Fix Dockerfile</li> </ul>"},{"location":"changelog/#080-2021-07-30","title":"0.8.0 - 2021-07-30","text":"<ul> <li>Real client ip address</li> <li>CLI support</li> <li>Release Windows/macOS package</li> </ul>"},{"location":"changelog/#070-2021-07-03","title":"0.7.0 - 2021-07-03","text":"<ul> <li>Add logging page: /_/admin/logging</li> <li>Disable Digest auth in default</li> <li>Support header Accept-Ranges/Range/Content-Range (Incomplete implementation)</li> <li>Fix bug: can't access home dir when it can't access share dir</li> </ul>"},{"location":"changelog/#061-2021-06-23","title":"0.6.1 - 2021-06-23","text":"<ul> <li>Compatible with Window10 Explorer(Microsoft-WebDAV-MiniRedir/10.0.19043)</li> </ul>"},{"location":"changelog/#060-2021-06-22","title":"0.6.0 - 2021-06-22","text":"<ul> <li>Support HTTP Digest authentication</li> <li>Code optimization</li> </ul>"},{"location":"changelog/#050-2021-05-14","title":"0.5.0 - 2021-05-14","text":"<ul> <li>Text file charset detect</li> <li>Support gzip/brotli in response</li> <li>Fix bug: Content-Encoding</li> </ul>"},{"location":"changelog/#040-2021-05-10","title":"0.4.0 - 2021-05-10","text":"<ul> <li>Support ignore rules in web dir browser</li> <li>Configurable guess_type()</li> </ul>"},{"location":"changelog/#031-2021-05-06","title":"0.3.1 - 2021-05-06","text":"<ul> <li>Broken change:</li> <li>Config.username/password =&gt; Config.account_mapping</li> <li>Environment Variable Name</li> <li>Add multi-account support</li> <li>Add permission support</li> <li>Add home_dir support</li> </ul>"},{"location":"changelog/#021-2021-04-27","title":"0.2.1 - 2021-04-27","text":"<ul> <li>Add web dir browser</li> </ul>"},{"location":"changelog/#011-2021-03-26","title":"0.1.1 - 2021-03-26","text":"<ul> <li>Fix bug</li> </ul>"},{"location":"changelog/#010-2021-03-25","title":"0.1.0 - 2021-03-25","text":"<ul> <li>first release</li> </ul>"},{"location":"compatibility/","title":"Compatibility","text":""},{"location":"compatibility/#compatible-clients","title":"Compatible Clients","text":"Client First tested version Remarks Firefox/Chrome/Safari 0.1.0 - macOS finder(WebDAVFS/3.0.0) 0.1.0 - Window10 Explorer(Microsoft-WebDAV-MiniRedir/10.0.19043) 0.6.1 Basic auth only support HTTPS, HTTP please enable Digest Joplin(Joplin/1.0) 0.1.0 - OmniFocus(OmniFocus-Mac/149.14.0/v3.11.7) 0.1.0 - WinSCP(WinSCP/5.19.1 neon/0.31.2) 0.7.0 Only support Basic auth"},{"location":"compatibility/#compatibility-test-results","title":"Compatibility Test Results","text":""},{"location":"compatibility/#test-tools","title":"Test Tools","text":"<ul> <li>litmus(0.13)</li> <li>user-agent name: <code>litmus/0.13 neon/0.31.2</code></li> <li>Version string(in debug.log): <code>neon 0.31.2: Library build, IPv6, libxml 2.9.10, zlib 1.2.11, GNU TLS 3.6.14.</code></li> </ul> <p>Run test</p> <pre><code>litmus http://IPAddress:8000/provider/fs username password\n# or\nlitmus http://IPAddress:8000/provider/memory username password\n</code></pre>"},{"location":"compatibility/#startup-test-server","title":"Startup Test Server","text":""},{"location":"compatibility/#asgi-webdav","title":"ASGI WebDAV","text":"<ul> <li>Version: 1.3.2</li> </ul> <pre><code>python -m asgi_webdav -c examples/config/litmus.toml -H 0.0.0.0\n# or\npython -m asgi_webdav --litmus # Deprecated\n</code></pre> <pre><code>-&gt; running `basic':\n 0. init.................. pass\n 1. begin................. pass\n 2. options............... pass\n 3. put_get............... pass\n 4. put_get_utf8_segment.. pass\n 5. put_no_parent......... pass\n 6. mkcol_over_plain...... pass\n 7. delete................ pass\n 8. delete_null........... pass\n 9. delete_fragment....... WARNING: DELETE removed collection resource with Request-URI including fragment; unsafe\n    ...................... pass (with 1 warning)\n10. mkcol................. pass\n11. mkcol_again........... pass\n12. delete_coll........... pass\n13. mkcol_no_parent....... pass\n14. mkcol_with_body....... pass\n15. finish................ pass\n&lt;- summary for `basic': of 16 tests run: 16 passed, 0 failed. 100.0%\n-&gt; 1 warning was issued.\n-&gt; running `copymove':\n 0. init.................. pass\n 1. begin................. pass\n 2. copy_init............. pass\n 3. copy_simple........... pass\n 4. copy_overwrite........ pass\n 5. copy_nodestcoll....... pass\n 6. copy_cleanup.......... pass\n 7. copy_coll............. pass\n 8. copy_shallow.......... pass\n 9. move.................. pass\n10. move_coll............. pass\n11. move_cleanup.......... pass\n12. finish................ pass\n&lt;- summary for `copymove': of 13 tests run: 13 passed, 0 failed. 100.0%\n-&gt; running `props':\n 0. init.................. pass\n 1. begin................. pass\n 2. propfind_invalid...... pass\n 3. propfind_invalid2..... pass\n 4. propfind_d0........... pass\n 5. propinit.............. pass\n 6. propset............... pass\n 7. propget............... pass\n 8. propextended.......... pass\n 9. propmove.............. pass\n10. propget............... pass\n11. propdeletes........... pass\n12. propget............... pass\n13. propreplace........... pass\n14. propget............... pass\n15. propnullns............ pass\n16. propget............... pass\n17. prophighunicode....... pass\n18. propget............... pass\n19. propremoveset......... pass\n20. propget............... pass\n21. propsetremove......... pass\n22. propget............... pass\n23. propvalnspace......... pass\n24. propwformed........... pass\n25. propinit.............. pass\n26. propmanyns............ pass\n27. propget............... pass\n28. propcleanup........... pass\n29. finish................ pass\n&lt;- summary for `props': of 30 tests run: 30 passed, 0 failed. 100.0%\n-&gt; running `locks':\n 0. init.................. pass\n 1. begin................. pass\n 2. options............... pass\n 3. precond............... pass\n 4. init_locks............ pass\n 5. put................... pass\n 6. lock_excl............. pass\n 7. discover.............. pass\n 8. refresh............... pass\n 9. notowner_modify....... pass\n10. notowner_lock......... pass\n11. owner_modify.......... pass\n12. notowner_modify....... pass\n13. notowner_lock......... pass\n14. copy.................. pass\n15. cond_put.............. pass\n16. fail_cond_put......... pass\n17. cond_put_with_not..... pass\n18. cond_put_corrupt_token WARNING: PUT failed with 412 not 423\n    ...................... pass (with 1 warning)\n19. complex_cond_put...... pass\n20. fail_complex_cond_put. pass\n21. unlock................ pass\n22. fail_cond_put_unlocked pass\n23. lock_shared........... pass\n24. notowner_modify....... pass\n25. notowner_lock......... pass\n26. owner_modify.......... pass\n27. double_sharedlock..... pass\n28. notowner_modify....... pass\n29. notowner_lock......... pass\n30. unlock................ pass\n31. prep_collection....... pass\n32. lock_collection....... pass\n33. owner_modify.......... pass\n34. notowner_modify....... pass\n35. refresh............... pass\n36. indirect_refresh...... pass\n37. unlock................ pass\n38. unmapped_lock......... WARNING: LOCK on unmapped url returned 200 not 201 (RFC4918:S7.3)\n    ...................... pass (with 1 warning)\n39. unlock................ pass\n40. finish................ pass\n&lt;- summary for `locks': of 41 tests run: 41 passed, 0 failed. 100.0%\n-&gt; 2 warnings were issued.\n-&gt; running `http':\n 0. init.................. pass\n 1. begin................. pass\n 2. expect100............. pass\n 3. finish................ pass\n&lt;- summary for `http': of 4 tests run: 4 passed, 0 failed. 100.0%\n</code></pre>"},{"location":"compatibility/#remark","title":"Remark","text":"<ul> <li>WARNING: DELETE removed collection resource with Request-URI including fragment; unsafe</li> <li>The litmus expect WebDAV server response code 400, when request DELETE with fragment(DELETE /litmus/frag/#ment)</li> <li>ASGI server     doesn't forward <code>fragment</code>     info to application</li> </ul>"},{"location":"compatibility/#apache-mod_webdav-in-docker","title":"Apache mod_webdav in Docker","text":"<ul> <li>From: bytemark/webdav</li> <li>Version: 2.4</li> <li>Digest: c124350447bb</li> <li>Build Time: 2018-12-14</li> </ul> <pre><code>docker pull bytemark/webdav\ndocker run --restart always \\\n  -e AUTH_TYPE=Digest -e USERNAME=username -e PASSWORD=password \\\n  --publish 8000:80 -d bytemark/webdav\n</code></pre> <pre><code>-&gt; running `basic':\n 0. init.................. pass\n 1. begin................. pass\n 2. options............... pass\n 3. put_get............... pass\n 4. put_get_utf8_segment.. pass\n 5. put_no_parent......... pass\n 6. mkcol_over_plain...... pass\n 7. delete................ pass\n 8. delete_null........... pass\n 9. delete_fragment....... pass\n10. mkcol................. pass\n11. mkcol_again........... pass\n12. delete_coll........... pass\n13. mkcol_no_parent....... pass\n14. mkcol_with_body....... pass\n15. finish................ pass\n&lt;- summary for `basic': of 16 tests run: 16 passed, 0 failed. 100.0%\n-&gt; running `copymove':\n 0. init.................. pass\n 1. begin................. pass\n 2. copy_init............. pass\n 3. copy_simple........... pass\n 4. copy_overwrite........ pass\n 5. copy_nodestcoll....... pass\n 6. copy_cleanup.......... pass\n 7. copy_coll............. pass\n 8. copy_shallow.......... pass\n 9. move.................. pass\n10. move_coll............. pass\n11. move_cleanup.......... pass\n12. finish................ pass\n&lt;- summary for `copymove': of 13 tests run: 13 passed, 0 failed. 100.0%\n-&gt; running `props':\n 0. init.................. pass\n 1. begin................. pass\n 2. propfind_invalid...... pass\n 3. propfind_invalid2..... pass\n 4. propfind_d0........... pass\n 5. propinit.............. pass\n 6. propset............... pass\n 7. propget............... pass\n 8. propextended.......... pass\n 9. propmove.............. pass\n10. propget............... pass\n11. propdeletes........... pass\n12. propget............... pass\n13. propreplace........... pass\n14. propget............... pass\n15. propnullns............ pass\n16. propget............... pass\n17. prophighunicode....... pass\n18. propget............... pass\n19. propremoveset......... pass\n20. propget............... pass\n21. propsetremove......... pass\n22. propget............... pass\n23. propvalnspace......... pass\n24. propwformed........... pass\n25. propinit.............. pass\n26. propmanyns............ pass\n27. propget............... pass\n28. propcleanup........... pass\n29. finish................ pass\n&lt;- summary for `props': of 30 tests run: 30 passed, 0 failed. 100.0%\n-&gt; running `locks':\n 0. init.................. pass\n 1. begin................. pass\n 2. options............... pass\n 3. precond............... pass\n 4. init_locks............ pass\n 5. put................... pass\n 6. lock_excl............. pass\n 7. discover.............. pass\n 8. refresh............... pass\n 9. notowner_modify....... pass\n10. notowner_lock......... pass\n11. owner_modify.......... pass\n12. notowner_modify....... pass\n13. notowner_lock......... pass\n14. copy.................. pass\n15. cond_put.............. pass\n16. fail_cond_put......... pass\n17. cond_put_with_not..... pass\n18. cond_put_corrupt_token WARNING: PUT failed with 400 not 423\n    ...................... pass (with 1 warning)\n19. complex_cond_put...... pass\n20. fail_complex_cond_put. pass\n21. unlock................ pass\n22. fail_cond_put_unlocked pass\n23. lock_shared........... pass\n24. notowner_modify....... pass\n25. notowner_lock......... pass\n26. owner_modify.......... pass\n27. double_sharedlock..... pass\n28. notowner_modify....... pass\n29. notowner_lock......... pass\n30. unlock................ pass\n31. prep_collection....... pass\n32. lock_collection....... pass\n33. owner_modify.......... pass\n34. notowner_modify....... pass\n35. refresh............... pass\n36. indirect_refresh...... pass\n37. unlock................ pass\n38. unmapped_lock......... WARNING: LOCK on unmapped url returned 200 not 201 (RFC4918:S7.3)\n    ...................... pass (with 1 warning)\n39. unlock................ pass\n40. finish................ pass\n&lt;- summary for `locks': of 41 tests run: 41 passed, 0 failed. 100.0%\n-&gt; 2 warnings were issued.\n-&gt; running `http':\n 0. init.................. pass\n 1. begin................. pass\n 2. expect100............. pass\n 3. finish................ pass\n&lt;- summary for `http': of 4 tests run: 4 passed, 0 failed. 100.0%\n</code></pre>"},{"location":"compatibility/#nginx-in-docker","title":"Nginx in Docker","text":"<ul> <li>From: ugeek/webdav</li> <li>Digest: b5e54f00265e</li> <li>Build Time: 2021-02-09</li> </ul> <pre><code>docker pull ugeek/webdav:latest\ndocker run --name webdav \\\n  --restart=unless-stopped \\\n  -p 8000:80 \\\n  -e USERNAME=username \\\n  -e PASSWORD=password \\\n  -e TZ=Europe/Madrid  \\\n  -e UDI=1000 \\\n  -e GID=1000 \\\n  -d  ugeek/webdav:amd64\n</code></pre> <pre><code>-&gt; running `basic':\n 0. init.................. pass\n 1. begin................. pass\n 2. options............... WARNING: server does not claim Class 2 compliance\n    ...................... pass (with 1 warning)\n 3. put_get............... pass\n 4. put_get_utf8_segment.. pass\n 5. put_no_parent......... pass\n 6. mkcol_over_plain...... pass\n 7. delete................ pass\n 8. delete_null........... pass\n 9. delete_fragment....... WARNING: DELETE removed collection resource with Request-URI including fragment; unsafe\n    ...................... pass (with 1 warning)\n10. mkcol................. pass\n11. mkcol_again........... pass\n12. delete_coll........... pass\n13. mkcol_no_parent....... pass\n14. mkcol_with_body....... pass\n15. finish................ pass\n&lt;- summary for `basic': of 16 tests run: 16 passed, 0 failed. 100.0%\n-&gt; 2 warnings were issued.\n-&gt; running `copymove':\n 0. init.................. pass\n 1. begin................. pass\n 2. copy_init............. pass\n 3. copy_simple........... WARNING: COPY to new resource should give 201 (RFC2518:S8.8.5)\n    ...................... pass (with 1 warning)\n 4. copy_overwrite........ FAIL (COPY overwrites collection: 409 Conflict)\n 5. copy_nodestcoll....... WARNING: COPY to non-existant collection '/litmus/nonesuch' gave '500 Internal Server Error' not 409 (RFC2518:S8.8.5)\n    ...................... pass (with 1 warning)\n 6. copy_cleanup.......... pass\n 7. copy_coll............. pass\n 8. copy_shallow.......... pass\n 9. move.................. WARNING: MOVE to new resource didn't give 201\n    ...................... FAIL (MOVE overwrites collection `/litmus/movecoll/' to `/litmus/movedest': 409 Conflict)\n10. move_coll............. FAIL (MOVE collection `/litmus/mvdest2/' over non-collection `/litmus/mvnoncoll' with overwrite: 409 Conflict)\n11. move_cleanup.......... pass\n12. finish................ pass\n&lt;- summary for `copymove': of 13 tests run: 10 passed, 3 failed. 76.9%\n-&gt; 3 warnings were issued.\nSee debug.log for network/debug traces.\n</code></pre>"},{"location":"compatibility/#summary","title":"Summary","text":"basic copymove props locks http ASGI WebDAV 1 warning pass pass 2 warnings pass Apache mod_webdav in docker pass pass pass 2 warnings pass Nginx in Docker 2 warnings 3 warnings skip skip skip"},{"location":"contributing/","title":"Contributing","text":"<p>New feature, bug fix, new language, new howto, typo fix; everything is fine.</p> <p>If you want to participate in this project, you are welcome to start by translating/writing documents.</p>"},{"location":"contributing/#basic-principles","title":"Basic principles","text":""},{"location":"contributing/#target-user","title":"Target user","text":"<ul> <li>Self-hosting(as app, with docker container)</li> <li>Developers using ASGI frameworks</li> </ul>"},{"location":"contributing/#user-strategy","title":"User strategy","text":""},{"location":"contributing/#normal-user","title":"Normal user","text":"<ul> <li>Out-of-the-box</li> <li>Guiding users to improve their configuration through log messages</li> </ul>"},{"location":"contributing/#power-user","title":"Power user","text":"<ul> <li>Flexibility should be provided without affecting the normal user</li> </ul>"},{"location":"contributing/#workflow","title":"Workflow","text":"<pre><code>graph TD\n    A[Proposal] --&gt;|fork| C[PR Draft]\n    C --&gt; D[CI] --&gt; C\n    D --&gt;|Out of Draft mode| E[review] --&gt; C\n    E --&gt; F[merge]</code></pre>"},{"location":"contributing/#proposal","title":"Proposal","text":"<ul> <li>Why/How/Who</li> <li>discuss of the technical solution</li> </ul>"},{"location":"contributing/#pr-draft","title":"PR Draft","text":"<ul> <li>create PR in Draft mode</li> <li>discuss of technical details</li> <li>add/check/update unit test</li> <li>check/update document</li> <li>CI/review code(move out Draft mode)</li> </ul>"},{"location":"contributing/#coding","title":"Coding","text":""},{"location":"contributing/#prepare","title":"Prepare","text":"<pre><code>git clone https://github.com/rexzhang/asgi-webdav.git\ncd asgi-webdav\npip install -U -r requirements.txt\n</code></pre>"},{"location":"contributing/#run-dev-server","title":"Run Dev Server","text":"<pre><code>python -m asgi_webdav --dev\n</code></pre>"},{"location":"contributing/#check-commit-by-pre-commit","title":"Check commit by pre-commit","text":"<pre><code>pip install pre-commit\npre-commit install\npre-commit run -a\n</code></pre>"},{"location":"contributing/#documentation","title":"Documentation","text":""},{"location":"contributing/#create-a-new-language-translation","title":"Create a new language translation","text":""},{"location":"contributing/#example","title":"Example","text":"<pre><code>cp docs/index.en.md docs/index.zh.md\n</code></pre>"},{"location":"contributing/#update-mkdocss-config-file","title":"Update MkDocs's config file","text":"<p><code>mkdocs.txt</code> example</p> <pre><code>- i18n:\n    docs_structure: suffix\n    languages:\n      - locale: en\n        default: true\n        name: English\n        build: true\n      - locale: zh\n        name: \u4e2d\u6587\n        build: true\n        nav_translations:\n          Home: \u9996\u9875\n          Getting started: \u5f00\u59cb\u914d\u7f6e\n          How To: \u5982\u4f55\u505a\n          Reference: \u53c2\u8003\n          Trouble Shooting: \u95ee\u9898\u5904\u7406\n</code></pre>"},{"location":"contributing/#ref","title":"Ref","text":"<ul> <li>ISO 639-1 language code</li> <li>MkDocs's i18n plugin</li> </ul>"},{"location":"contributing/#create-a-new-howto","title":"Create a new howto","text":"<pre><code>nano docs/howto/howto-this-is-a-new-howto.en.md\n</code></pre>"},{"location":"contributing/#preview","title":"Preview","text":"<pre><code>pip install -U -r requirements.d/mkdocs.txt\nmkdocs serve\n</code></pre>"},{"location":"","title":"Overview","text":"<p>An asynchronous WebDAV server implementation, Support multi-provider, multi-account and permission control.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>ASGI standard</li> <li>WebDAV standard: RFC4918</li> <li>Support multi-provider: FileSystemProvider, MemoryProvider, WebHDFSProvider</li> <li>Support multi-account and permission control</li> <li>Support optional anonymous user</li> <li>Support optional home directory</li> <li>Support store password in raw/hashlib/LDAP(experimental) mode</li> <li>Full asyncio file IO</li> <li>Passed all litmus(0.13) test, except 3 warning</li> <li>Browse the file directory in the browser</li> <li>Support HTTP Basic/Digest authentication</li> <li>Support response in Gzip/Zstd</li> <li>Compatible with macOS finder and Window10 Explorer</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":"<pre><code>docker pull ray1ex/asgi-webdav\ndocker run -dit --restart unless-stopped \\\n  -p 8000:8000 \\\n  -e UID=1000 -e GID=1000 \\\n  -v /your/data:/data \\\n  --name asgi-webdav ray1ex/asgi-webdav\n</code></pre>"},{"location":"#default-account","title":"Default Account","text":"value description username <code>username</code> - password <code>password</code> - permission <code>[\"+\"]</code> Allow access to all directories"},{"location":"#view-in-browser","title":"View in Browser","text":""},{"location":"install/","title":"Installation","text":""},{"location":"install/#docker","title":"Docker","text":""},{"location":"install/#install","title":"Install","text":"<pre><code>docker pull ray1ex/asgi-webdav:latest\n</code></pre>"},{"location":"install/#startup-server","title":"Startup server","text":"<pre><code>docker run --restart always -p 0.0.0.0:8000:8000 \\\n  -v /your/data:/data \\\n  -e UID=1000 -e GID=1000 \\\n  --name asgi-webdav ray1ex/asgi-webdav\n</code></pre> <pre><code>WARNING: load config value from file[/data/webdav.json] failed, [Errno 2] No such file or directory: '/data/webdav.json'\nINFO: [asgi_webdav.webdav] ASGI WebDAV(v0.3.1) starting...\nINFO: [asgi_webdav.distributor] Mapping Prefix: / =&gt; file:///data\nINFO: [asgi_webdav.auth] Register Account: username, allow:[''], deny:[]\nINFO: [uvicorn] Started server process [7]\nINFO: [uvicorn] Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)\n</code></pre>"},{"location":"install/#default-value","title":"Default value","text":"<p>username is <code>username</code>, password is <code>password</code>, map <code>/your/data</code> to <code>http://localhost:8000</code></p>"},{"location":"install/#pypi","title":"PyPI","text":""},{"location":"install/#install_1","title":"Install","text":"<pre><code>pip install -U ASGIWebDAV[full]\n</code></pre>"},{"location":"install/#startup-server_1","title":"Startup server","text":"Quick startRun it with config file <pre><code>asgi-webdav --root-path .\n</code></pre> <pre><code>asgi-webdav --config /your/webdav.json\n</code></pre>"},{"location":"install/#output-example","title":"Output example","text":"<pre><code>2022-03-22 16:06:49,363 INFO: [asgi_webdav.server] ASGI WebDAV Server(v1.0.0) starting...\n2022-03-22 16:06:49,364 INFO: [asgi_webdav.auth] Register User: username, allow:[''], deny:[]\n2022-03-22 16:06:49,364 INFO: [asgi_webdav.web_dav] Mapping Prefix: / =&gt; file://.\n2022-03-22 16:06:49,844 INFO: [asgi_webdav.server] ASGI WebDAV Server running on http://127.0.0.1:8000 (Press CTRL+C to quit)\n</code></pre>"},{"location":"install/#default-valuequick-start","title":"Default value(quick start)","text":"<p>username is <code>username</code>, password is <code>password</code>, mapping current path <code>.</code> to <code>http://localhost:8000</code></p>"},{"location":"install/#source-code","title":"Source Code","text":""},{"location":"install/#install_2","title":"Install","text":"<pre><code>git pull https://github.com/rexzhang/asgi-webdav.git\npip install -U -r requirements.txt\n</code></pre>"},{"location":"install/#startup-server_2","title":"Startup server","text":"Quick startRun it with config file <pre><code>python -m asgi_webdav --root-path .\n</code></pre> <pre><code>python -m asgi_webdav --config /your/webdav.json\n</code></pre>"},{"location":"install/#standalone-application","title":"Standalone Application","text":""},{"location":"install/#install_3","title":"Install","text":"macOSWindows <pre><code>wget https://github.com/rexzhang/asgi-webdav/releases/download/v0.9.1/asgi-webdav-macos.zip\nunzip asgi-webdav-macos.zip\n</code></pre> <pre><code>dl https://github.com/rexzhang/asgi-webdav/releases/download/v0.9.1/asgi-webdav.exe\n</code></pre> <p>For other platforms or versions, please visit GitHub Release</p>"},{"location":"install/#startup-server_3","title":"Startup server","text":"macOSmacOS with config fileWindows <pre><code>./asgi_webdav -r .\n2022-03-22 16:19:45,259 INFO: [asgi_webdav.server] ASGI WebDAV Server(v0.9.1) starting...\n2022-03-22 16:19:45,259 INFO: [asgi_webdav.auth] Register User: username, allow:[''], deny:[]\n2022-03-22 16:19:45,260 INFO: [asgi_webdav.web_dav] Mapping Prefix: / =&gt; file://.\n2022-03-22 16:19:45,374 INFO: [asgi_webdav.server] ASGI WebDAV Server running on http://127.0.0.1:8000 (Press CTRL+C to quit)\n</code></pre> <pre><code>./asgi-webdav --config /tmp/webdav.json\nINFO: [asgi_webdav.config] Load config value from config file:/tmp/webdav.json\n2022-03-22 16:16:58,853 INFO: [asgi_webdav.server] ASGI WebDAV Server(v0.9.1) starting...\n2022-03-22 16:16:58,853 INFO: [asgi_webdav.auth] Register User: rex-hashlib, allow:['^/$'], deny:[]\n2022-03-22 16:16:58,853 INFO: [asgi_webdav.auth] Register User: rex, allow:[''], deny:[]\n2022-03-22 16:16:58,853 INFO: [asgi_webdav.auth] Register User: user-ldap, allow:['^/$'], deny:[]\n2022-03-22 16:16:58,854 INFO: [asgi_webdav.web_dav] Mapping Prefix: / =&gt; file:///tmp/root\n2022-03-22 16:16:58,854 INFO: [asgi_webdav.web_dav] Mapping Prefix: /home =&gt; file:///tmp/homes/{user name}\n2022-03-22 16:16:58,925 INFO: [asgi_webdav.server] ASGI WebDAV Server running on http://127.0.0.1:8000 (Press CTRL+C to quit)\n</code></pre> <pre><code>asgi_webdav --config c:/your/webdav.json\n</code></pre>"},{"location":"known-issues/","title":"Known Issues","text":"<ul> <li>Can not open .DMG file in macOS finder</li> <li>The type of the MemoryProvider's directory is displayed incorrectly</li> </ul>"},{"location":"quick-start-in-docker/","title":"Quick Start in Docker","text":""},{"location":"quick-start-in-docker/#install","title":"Install","text":"<pre><code>docker pull ray1ex/asgi-webdav:latest\n</code></pre>"},{"location":"quick-start-in-docker/#take-a-glance","title":"Take a Glance","text":"<pre><code>docker run --restart always -p 0.0.0.0:8000:8000 \\\n  -v /your/data:/data \\\n  --name asgi-webdav ray1ex/asgi-webdav\n</code></pre> <p>Because there is no <code>webdav.json</code> file under <code>/your/data</code>, it will be started with the full default configuration. The root directory mapping to <code>/your/data</code>; there is only one account, username <code>username</code>, password <code>password</code>, and all permissions.</p>"},{"location":"quick-start-in-docker/#multi-account","title":"Multi-Account","text":"<p>Create file <code>/your/data/webdav.json</code> as below</p> <pre><code>{\n    \"account_mapping\": [\n        {\n            \"username\": \"user_all\",\n            \"password\": \"pw1\",\n            \"permissions\": [\n                \"+\"\n            ]\n        },\n        {\n            \"username\": \"user_litmus\",\n            \"password\": \"pw2\",\n            \"permissions\": [\n                \"+^/$\",\n                \"+^/litmus\",\n                \"-^/litmus/other\"\n            ]\n        },\n        {\n            \"username\": \"guest\",\n            \"password\": \"pw3\",\n            \"permissions\": []\n        }\n    ]\n}\n</code></pre> <p>Restart the docker container and it will take effect. There are three accounts in total.</p> username password access permissions <code>user_all</code> <code>pw1</code> all path <code>user_litmus</code> <code>pw2</code> <code>/</code> and <code>/litmus</code> and <code>/litmus/*</code> <code>guest</code> <code>pw3</code> can not access any path"},{"location":"quick-start-in-docker/#path-mapping","title":"Path Mapping","text":""},{"location":"quick-start-in-docker/#configuration-file","title":"Configuration File","text":"<p>Change file <code>/your/data/webdav.json</code> as below.</p> <pre><code>{\n    \"account_mapping\": [\n        {\n            \"username\": \"username\",\n            \"password\": \"password\",\n            \"permissions\": [\n                \"+\"\n            ]\n        }\n    ],\n    \"provider_mapping\": [\n        {\n            \"prefix\": \"/\",\n            \"uri\": \"file:///data/root\"\n        },\n        {\n            \"prefix\": \"/litmus\",\n            \"uri\": \"memory:///\"\n        },\n        {\n            \"prefix\": \"/litmus/fs\",\n            \"uri\": \"file:///data/other\"\n        },\n        {\n            \"prefix\": \"/litmus/memory\",\n            \"uri\": \"memory:///\"\n        }\n    ]\n}\n</code></pre>"},{"location":"quick-start-in-docker/#create-docker-container","title":"Create Docker Container","text":"<pre><code>docker run --restart always -p 0.0.0.0:8000:8000 \\\n  -v /your/data:/data -v /your/data/other:/data/other \\\n  --name asgi-webdav ray1ex/asgi-webdav\n</code></pre>"},{"location":"quick-start-in-docker/#path-mapping-table","title":"Path Mapping Table","text":"HTTP path path in Docker container path in host machine <code>/</code> <code>/data/root</code> <code>/your/data/root</code> <code>/litmus</code> memory area A <code>/litmus/fs</code> <code>/data/other</code> <code>/your/data/other</code> <code>/litmus/memory</code> memory area B <p>The system works without creating the path <code>/your/data/root</code> on the host machine; however, accessing the URL <code>/</code> only results in a 404 error</p>"},{"location":"quick-start-in-docker/#home-directory","title":"Home Directory","text":""},{"location":"quick-start-in-docker/#configuration-file_1","title":"Configuration File","text":"<pre><code>{\n    \"account_mapping\": [\n        {\n            \"username\": \"user_a\",\n            \"password\": \"password\",\n            \"permissions\": [\n                \"+\"\n            ]\n        },\n        {\n            \"username\": \"user_b\",\n            \"password\": \"password\",\n            \"permissions\": []\n        }\n    ],\n    \"provider_mapping\": [\n        {\n            \"prefix\": \"/\",\n            \"uri\": \"file:///data/root\"\n        },\n        {\n            \"prefix\": \"/~\",\n            \"uri\": \"file:///data/homes\",\n            \"home_dir\": true\n        }\n    ]\n}\n</code></pre>"},{"location":"quick-start-in-docker/#create-docker-container_1","title":"Create Docker Container","text":"<pre><code>docker run --restart always -p 0.0.0.0:8000:8000 \\\n  -v /your/data:/data -v /your/data/homes:/data/homes \\\n  --name asgi-webdav ray1ex/asgi-webdav\n</code></pre>"},{"location":"quick-start-in-docker/#path-mapping-table_1","title":"Path Mapping Table","text":"user URL path in Docker container path in host machine <code>user_a</code> <code>/~</code> <code>/data/homes/user_a</code> <code>/your/data/homes/user_a</code> <code>user_a</code> <code>/~/sub</code> <code>/data/homes/user_a/sub</code> <code>/your/data/homes/user_a/sub</code> <code>user_b</code> <code>/~</code> <code>/data/homes/user_b</code> <code>/your/data/homes/user_b</code> <code>user_b</code> <code>/~/sub</code> <code>/data/homes/user_b/sub</code> <code>/your/data/homes/user_b/sub</code> <ul> <li>If the subdirectory of the same name corresponding to the user does not exist, it will cause the request to the home   directory to fail. Please create paths such as <code>/your/data/homes/user_a</code> on the host by yourself.</li> <li>Even if a user does not have access to any shared directory, t hey has access to all they home directories.</li> <li>The system allows multiple home directories to exist at the same time, for example: <code>/~</code> <code>/home</code></li> </ul>"},{"location":"trouble-shooting/","title":"Trouble Shooting","text":""},{"location":"trouble-shooting/#upgrade-to-1xx-from-0xx-with-watchtower-or-portainer","title":"Upgrade to 1.x.x from 0.x.x with watchtower or portainer","text":"<p>Please delete and re-install container.</p>"},{"location":"guide/authentication/","title":"Authentication","text":""},{"location":"guide/authentication/#account-preprocessing","title":"Account Preprocessing","text":"<ul> <li>If anonymous account are enabled, they will be automatically added to the list of accounts</li> <li>If can not found any account, the system will automatically add a default(admin) account.</li> </ul> <pre><code>flowchart TB\n    START@{ shape: sm-circ, label: \"Small start\" }\n    END@{ shape: framed-circle, label: \"Stop\" }\n    A{{config.anonymous.enable?}}\n    ADD_ANONYMOUS_ACCOUNT[Add config.anonymous.account to config.account_mapping]\n    B{{config.account_mapping is empty?}}\n    ADD_DEFAULT_ACCOUNT[\"Add default(admin) account to config.account_mapping\"]\n\n    START --&gt; A\n    A --&gt;|True| ADD_ANONYMOUS_ACCOUNT --&gt; B\n    A --&gt;|False| B\n    B --&gt;|True| ADD_DEFAULT_ACCOUNT --&gt; END\n    B --&gt;|False| END</code></pre>"},{"location":"guide/authentication/#matchcheck-account","title":"Match/Check Account","text":"<pre><code>flowchart TB\n    START@{ shape: sm-circ, label: \"Small start\" }\n    END@{ shape: framed-circle, label: \"Stop\" }\n    HTTP_HEADER_CHECK{{Get HTTP header: authorization}}\n    HTTP_AUTH[[HTTP Basic/Digest Auth Logic]]\n    ALLOW_MISSING_AUTH_HEADER{{config.anonymous.enable and config.anonymous.allow_missing_auth_header?}}\n\n    START--&gt; HTTP_HEADER_CHECK\n    HTTP_HEADER_CHECK --&gt;|Got| HTTP_AUTH\n    HTTP_HEADER_CHECK --&gt;|None| ALLOW_MISSING_AUTH_HEADER\n    HTTP_AUTH --&gt;|match| USER_IS_X[User = X or Anonymous] --&gt; END\n    HTTP_AUTH --&gt;|failed| 401([HTTP 401/Unauthorized])\n    ALLOW_MISSING_AUTH_HEADER --&gt;|False| 401\n    ALLOW_MISSING_AUTH_HEADER --&gt;|True| USER_IS_ANONYMOUS[User = Anonymous] --&gt; END</code></pre>"},{"location":"guide/authentication/#anonymous-account","title":"Anonymous Account","text":"<p>More detail, please see howto.</p>"},{"location":"guide/cors/","title":"Cross-Origin Resource Sharing (CORS)","text":""},{"location":"guide/cors/#enable-cors-allow-any-origin","title":"Enable CORS, allow any Origin","text":"<pre><code>{\n    \"cors\": {\n        \"enable\": true,\n        \"allow_origins\": [\n            \"*\"\n        ]\n    }\n}\n</code></pre>"},{"location":"guide/cors/#allow-multiple-origin","title":"Allow multiple Origin","text":"<pre><code>{\n    \"cors\": {\n        \"enable\": true,\n        \"allow_origins\": [\n            \"https://i.am.origin.com\",\n            \"https://me.too.com\"\n        ]\n    }\n}\n</code></pre>"},{"location":"guide/cors/#based-on-the-regular-expressions-allowed-origin","title":"Based on the regular expressions allowed Origin","text":"<pre><code>{\n    \"cors\": {\n        \"enable\": true,\n        \"allow_origin_regex\": \"^https://cors.*\"\n    }\n}\n</code></pre>"},{"location":"guide/cors/#based-on-the-regular-expressions-allowed-url","title":"Based on the regular expressions allowed URL","text":"<pre><code>{\n    \"cors\": {\n        \"enable\": true,\n        \"allow_url_regex\": \"^/cors/path.*\",\n        \"allow_origins\": [\n            \"*\"\n        ]\n    }\n}\n</code></pre>"},{"location":"guide/cors/#allowed-http-methods","title":"Allowed HTTP methods","text":"<pre><code>{\n    \"cors\": {\n        \"enable\": true,\n        \"allow_origins\": [\n            \"*\"\n        ],\n        \"allow_methods\": [\n            \"GET\",\n            \"HEAD\",\n            \"POST\"\n        ]\n    }\n}\n</code></pre>"},{"location":"guide/multi-account/","title":"Multi-Account and Home Directory","text":""},{"location":"guide/multi-account/#config-file","title":"config file","text":"<p><code>/your/data/webdav.json</code></p> <pre><code>{\n    \"account_mapping\": [\n        {\n            \"username\": \"user_all\",\n            \"password\": \"pw1\",\n            \"permissions\": [\n                \"+\"\n            ]\n        },\n        {\n            \"username\": \"user_a\",\n            \"password\": \"pw2\",\n            \"permissions\": [\n                \"+^/$\",\n                \"+^/share\",\n                \"-^/share/no_a\"\n            ]\n        },\n        {\n            \"username\": \"user_b\",\n            \"password\": \"pw3\",\n            \"permissions\": [\n                \"+^/$\",\n                \"+^/share\",\n                \"-^/share/no_b\"\n            ]\n        },\n        {\n            \"username\": \"guest\",\n            \"password\": \"pw4\",\n            \"permissions\": []\n        }\n    ],  \n    \"provider_mapping\": [\n        {\n            \"prefix\": \"/\",\n            \"uri\": \"file:///data/root\"\n        },\n        {\n            \"prefix\": \"/temp1\",\n            \"uri\": \"memory:///\"\n        },\n        {\n            \"prefix\": \"/temp2\",\n            \"uri\": \"memory:///\"\n        },\n        {\n            \"prefix\": \"/~\",\n            \"uri\": \"file:///data/homes\",\n            \"home_dir\": true\n        }\n    ]\n}\n</code></pre>"},{"location":"guide/multi-account/#docker-command","title":"docker command","text":"<pre><code>docker run --restart always -p 0.0.0.0:8000:8000 \\\n  -v /your/data:/data -v /your/data/homes:/data/homes \\\n  --name asgi-webdav ray1ex/asgi-webdav\n</code></pre>"},{"location":"guide/multi-account/#urlpath-mapping-table","title":"URL/path mapping table","text":"user URL path in docker container path in host All <code>/</code> <code>/data/root</code> <code>/your/data/root</code> All <code>/share</code> <code>/data/root/share</code> <code>/your/data/root/share</code> All <code>/temp1</code> memory area #1 All <code>/temp2</code> memory area #2 <code>user_a</code> <code>/~</code> <code>/data/homes/user_a</code> <code>/your/data/homes/user_a</code> <code>user_a</code> <code>/~/sub</code> <code>/data/homes/user_a/sub</code> <code>/your/data/homes/user_a/sub</code> <code>user_b</code> <code>/~</code> <code>/data/homes/user_b</code> <code>/your/data/homes/user_b</code> <code>user_b</code> <code>/~/sub</code> <code>/data/homes/user_b/sub</code> <code>/your/data/homes/user_b/sub</code>"},{"location":"guide/multi-account/#account-permission","title":"account permission","text":"username <code>user_all</code> <code>user_a</code> <code>user_b</code> <code>guest</code> password <code>pw1</code> <code>pw2</code> <code>pw3</code> <code>pw4</code> URL <code>/~</code> Allow Allow Allow Allow URL <code>/</code> Allow Allow Allow Deny URL <code>/share</code> Allow Allow Allow Deny URL <code>/share/no_a</code> Allow Deny Allow Deny URL <code>/share/no_b</code> Allow Allow Deny Deny other URL Allow Deny Deny Deny"},{"location":"guide/protect-your-password-in-the-config/","title":"Protect your password in the configuration file","text":"<pre><code>{\n  \"account_mapping\": [\n    { \"username\": \"user-raw\", \"password\": \"password\", \"permissions\": [\"+\"] },\n    {\n      \"username\": \"user-hashlib\",\n      \"password\": \"&lt;hashlib&gt;:sha256:salt:291e247d155354e48fec2b579637782446821935fc96a5a08a0b7885179c408b\",\n      \"permissions\": [\"+^/$\"]\n    },\n    {\n      \"username\": \"user-digest\",\n      \"password\": \"&lt;digest&gt;:ASGI-WebDAV:c1d34f1e0f457c4de05b7468d5165567\",\n      \"permissions\": [\"+^/$\"]\n    },\n    {\n      \"username\": \"user-ldap\",\n      \"password\": \"&lt;ldap&gt;#1#ldaps://your.ldap.server.com#SIMPLE#uid=user-ldap,cn=users,dc=your.ldap.server.com\",\n      \"permissions\": [\"+^/$\"]\n    },\n    {\n      \"username\": \"*ldap\",\n      \"password\": \"&lt;ldap&gt;#2#ldaps://your.ldap.server.com#cert_policy=try#uid={username},cn=users,dc=your.ldap.server.com\",\n      \"permissions\": [\"+^/$\"]\n    }\n  ]\n}\n</code></pre>"},{"location":"guide/protect-your-password-in-the-config/#raw-mode","title":"Raw Mode","text":"<p>user <code>user-raw</code>'s password is real password</p>"},{"location":"guide/protect-your-password-in-the-config/#hashlib-mode","title":"hashlib Mode","text":"<p><code>password</code>'s format is <code>\"&lt;hashlib&gt;:{algorithm}:{salt}:{hashed-password}\"</code></p>"},{"location":"guide/protect-your-password-in-the-config/#algorithm","title":"{algorithm}","text":"<p>A list of supported <code>{algorithms}</code> can be found at Python's docs</p> <p>The commonly used algorithms:</p> <ul> <li>sha256</li> <li>sha384</li> <li>sha512</li> <li>blake2b (optimized for 64-bit platforms)</li> <li>blake2s (optimized for 8- to 32-bit platforms)</li> </ul>"},{"location":"guide/protect-your-password-in-the-config/#salt","title":"{salt}","text":"<p><code>{salt}</code> can be any string</p>"},{"location":"guide/protect-your-password-in-the-config/#hashed-password","title":"{hashed-password}","text":"<p><code>{hashed-password}</code>'s format is <code>ALGORITHM(bytes(\"{salt}:{password}\")).hexdigest()</code></p> <p>example:</p> <ul> <li>{algorithm}: sha256</li> <li>{salt}: <code>salt</code></li> <li>{password}: <code>password</code></li> </ul> <pre><code>&gt;&gt;&gt; import hashlib\n&gt;&gt;&gt; hashlib.new(\"sha256\", \"{}:{}\".format(\"salt\", \"password\").encode(\"utf-8\")).hexdigest()\n'291e247d155354e48fec2b579637782446821935fc96a5a08a0b7885179c408b'\n</code></pre>"},{"location":"guide/protect-your-password-in-the-config/#ref","title":"Ref","text":"<ul> <li>https://en.wikipedia.org/wiki/Comparison_of_cryptographic_hash_functions</li> </ul>"},{"location":"guide/protect-your-password-in-the-config/#http-digest-mode","title":"HTTP Digest Mode","text":"<p><code>password</code>'s format is <code>&lt;digest&gt;:{realm}:{HA1}</code></p>"},{"location":"guide/protect-your-password-in-the-config/#realm","title":"{realm}","text":"<p><code>ASGI-WebDAV</code></p>"},{"location":"guide/protect-your-password-in-the-config/#ha1","title":"{HA1}","text":"<p><code>{HA1}</code>'s format is <code>md5(bytes(\"{username}:{realm}:{password}\")).hexdigest()</code></p> <p>example:</p> <ul> <li>{username}: <code>user-digest</code></li> <li>{realm}: <code>ASGI-WebDAV</code></li> <li>{password}: <code>password</code></li> </ul> <pre><code>&gt;&gt;&gt; import hashlib\n&gt;&gt;&gt; hashlib.new(\"md5\", \"{}:{}:{}\".format(\"user-digest\", \"ASGI-WebDAV\", \"password\").encode(\"utf-8\")).hexdigest()\n'c1d34f1e0f457c4de05b7468d5165567'\n</code></pre>"},{"location":"guide/protect-your-password-in-the-config/#ref_1","title":"Ref","text":"<ul> <li>RFC2617</li> </ul>"},{"location":"guide/protect-your-password-in-the-config/#ldapv1-experimental","title":"LDAP(v1) (experimental)","text":""},{"location":"guide/protect-your-password-in-the-config/#password-format","title":"password format","text":"<pre><code>\"&lt;ldap&gt;#1#{ldap-uri}#{mechanism}#{ldap-user}\"\n</code></pre>"},{"location":"guide/protect-your-password-in-the-config/#ldap-uri","title":"{ldap-uri}","text":"<p>Example:</p> <p><code>ldap://your.ldap.server.com</code> <code>ldaps://your.tls.ldap.server.com</code></p> <ul> <li>Official Website</li> <li>RFC4516</li> </ul>"},{"location":"guide/protect-your-password-in-the-config/#mechanism","title":"{mechanism}","text":"<p>Example:</p> <p><code>SIMPLE</code> ...</p>"},{"location":"guide/protect-your-password-in-the-config/#ldap-user","title":"{ldap-user}","text":"<p>Example:</p> <p><code>uid=you-name,cn=users,dc=ldap,dc=server,dc=com</code></p>"},{"location":"guide/protect-your-password-in-the-config/#ldapv2","title":"LDAP(v2)","text":""},{"location":"guide/protect-your-password-in-the-config/#username","title":"username","text":"<p>Use <code>\"*ldap\"</code> as <code>username</code></p>"},{"location":"guide/protect-your-password-in-the-config/#password-format_1","title":"password format","text":"<pre><code>\"&lt;ldap&gt;#2#ldaps://{ldap-uri}#{params}#{user-dn-pattern}\"\n</code></pre>"},{"location":"guide/protect-your-password-in-the-config/#permissions","title":"permissions","text":"<p>Warning</p> <p><code>permissions</code> will be automatically applied to all ldap accounts.</p>"},{"location":"guide/protect-your-password-in-the-config/#ldap-uri_1","title":"{ldap-uri}","text":"<p>Example:</p> <p><code>ldap://your.ldap.server.com</code> <code>ldaps://your.tls.ldap.server.com</code></p>"},{"location":"guide/protect-your-password-in-the-config/#ref_2","title":"Ref","text":"<ul> <li>Official Website</li> <li>RFC4516</li> </ul>"},{"location":"guide/protect-your-password-in-the-config/#params","title":"{params}","text":"<p>This is a query string specifying additional optional settings. Only one is supported as of now:</p> <p><code>cert_policy</code> indicates the policy about server verification. The allowed values are:</p> <ul> <li><code>try</code> or <code>demand</code>: The server cert will be verified, and if it fais, an error will be raised. This is the default.</li> <li><code>never</code> or <code>allow</code>: The server cert will be used without any verification.</li> </ul> <p>Example:</p> <p><code>cert_policy=try</code></p>"},{"location":"guide/protect-your-password-in-the-config/#ref_3","title":"Ref","text":"<ul> <li>RFC1866</li> </ul>"},{"location":"guide/protect-your-password-in-the-config/#user-dn-pattern","title":"{user-dn-pattern}","text":"<p>Specify the user DN pattern, with a <code>username</code> substitution field. Example:</p> <p><code>uid={username},cn=users,dc=ldap,dc=server,dc=com</code></p>"},{"location":"guide/protect-your-password-in-the-config/#compatibility","title":"Compatibility","text":"HTTP Basic auth HTTP Digest auth Raw Mode Y Y hashlib Mode Y N HTTP Digest Mode Y Y LDAP(v1) Y N LDAP(v2) Y N"},{"location":"howto/howto-allow-anonymous-user/","title":"Anonymous User Howto","text":"<ul> <li>An anonymous account is also an account, with the username/password/permissions determined by the <code>config.anonymous.user</code> configuration.</li> <li>Anonymous accounts can login by the auth header.</li> <li>By default, if the auth header is missing, the client will automatically login as an anonymous account.</li> <li>By default, anonymous users have access to all paths.</li> </ul>"},{"location":"howto/howto-allow-anonymous-user/#to-enable-anonymous-user-access-update-your-config-file-like-below","title":"To enable anonymous user access, update your config file like below","text":""},{"location":"howto/howto-allow-anonymous-user/#just-enable-anonymous-user","title":"just enable anonymous user","text":"<pre><code>[anonymous]\nenable = true\n</code></pre>"},{"location":"howto/howto-allow-anonymous-user/#customize-anonymous-user","title":"customize anonymous user","text":"<pre><code>[anonymous]\nenable = true\n\n[anonymous.user]\nusername = \"anonymous\"\npassword = \"\"\npermissions = [\"+^/$\"] # Only the root directory is allowed to be accessed.\n</code></pre>"},{"location":"howto/howto-allow-anonymous-user/#more-config","title":"more config","text":"<pre><code>[anonymous]\nenable = true\nallow_missing_auth_header = false # If false, anonymous users can only authenticate by the auth header.\n\n[anonymous.user]\nusername = \"anonymous\"\npassword = \"\"\npermissions = [\"+^/$\"]\n</code></pre>"},{"location":"howto/howto-hide-files-in-dir-with-the-specified-client/","title":"How to hide files in directory with the specified client","text":""},{"location":"howto/howto-hide-files-in-dir-with-the-specified-client/#hide-do-not-display-at-every-in-all-client","title":"Hide <code>*.do-not-display-at-every</code> in all client","text":"<pre><code>{\n  \"hide_file_in_dir\": {\n    \"user_rules\": {\n      \"\": \".+\\\\.do-not-display-at-every$\"\n    }\n  }\n}\n</code></pre>"},{"location":"howto/howto-hide-files-in-dir-with-the-specified-client/#hide-hide-and-hide-in-macos-finder","title":"Hide <code>hide.*</code> and <code>*.hide</code> in macOS finder","text":"<pre><code>{\n  \"hide_file_in_dir\": {\n    \"user_rules\": {\n      \"WebDAVFS\": \"^hide\\\\.|.+\\\\.hide$\"\n    }\n  }\n}\n</code></pre>"},{"location":"howto/howto-specify-type-for-specific-file-extentions/","title":"How to Specify Type for specific file extentions","text":"<p>change your <code>webdav.json</code> like blow:</p> <pre><code>{\n  \"guess_type_extension\": {\n    \"filename_mapping\": {\n      \".bashrc\": \"text/plain\"\n    },\n    \"suffix_mapping\": {\n      \".py\": \"text/plain\"\n    }\n  }\n}\n</code></pre> <p>default value DEFAULT_FILENAME_CONTENT_TYPE_MAPPING and DEFAULT_SUFFIX_CONTENT_TYPE_MAPPING defined in file <code>constants.py</code> .</p>"},{"location":"provider/webhdfs/","title":"WebHDFS Provider","text":""},{"location":"provider/webhdfs/#overview","title":"Overview","text":"<p>This provider integrates WebHDFS as a backend for the ASGI WebDAV server. It enables read/write access to an HDFS cluster over HTTP(S), using the WebHDFS REST API.</p> <p>This implementation is async, based on <code>httpx</code>, and supports optional Kerberos authentication via <code>httpx-kerberos</code>. It supports user impersonation through the <code>doAs</code> query parameter when Kerberos is enabled.</p>"},{"location":"provider/webhdfs/#features","title":"Features","text":"<ul> <li>Full support for WebHDFS API over HTTP</li> <li>Async implementation using <code>httpx</code></li> <li>Optional Kerberos authentication via <code>httpx-kerberos</code></li> <li>User impersonation (<code>doAs</code>)</li> <li>Optional integration with LDAP</li> </ul>"},{"location":"provider/webhdfs/#provider-registration","title":"Provider Registration","text":"<p>To use the WebHDFS provider, configure the <code>provider_mapping</code> in your main config:</p> <pre><code>{\n  \"provider_mapping\": [\n    {\n      \"prefix\": \"/\",\n      \"uri\": \"http://&lt;namenode&gt;:9870/webhdfs/v1\",\n      \"type\": \"webhdfs\"\n    }\n  ]\n}\n</code></pre> <ul> <li><code>prefix</code>: Mount path in the WebDAV hierarchy.</li> <li><code>uri</code>: Full base path to your WebHDFS root (should end with /webhdfs/v1).</li> </ul>"},{"location":"provider/webhdfs/#authentication-modes","title":"Authentication Modes","text":"<ol> <li>Unauthenticated WebHDFS will accept the user.name query parameter as-is. No verification is done.</li> <li> <p>Kerberos (recommended)    If Kerberos is configured on the server and httpx-kerberos is installed:</p> </li> <li> <p>The WebDAV server authenticates as a Kerberos principal.</p> </li> <li>Impersonation is performed using the doAs query parameter in each request to WebHDFS.</li> <li>Requires that the Kerberos principal has impersonation rights in HDFS.</li> </ol>"},{"location":"provider/webhdfs/#dependencies","title":"Dependencies","text":"<p>Required Python packages:</p> <pre><code>pip install ASGIWebDAV[webhdfs]\n\n# or\npip install httpx httpx-kerberos\n</code></pre>"},{"location":"provider/webhdfs/#key-components","title":"Key Components","text":"<ul> <li>WebHDFSProvider: Implements abstract provider interface.</li> <li>Redirect Handling: Handles 307 redirects issued by the NameNode.</li> <li>Impersonation Logic: Injects doAs param when Kerberos is used.</li> <li>Streaming Support: Uses <code>httpx</code>'s async streaming for large files.</li> </ul>"},{"location":"provider/webhdfs/#ldap-integration-optional","title":"LDAP Integration (Optional)","text":"<p>Although not required, integrating with an LDAP server allows:</p> <ul> <li>Verifying WebDAV user identities before passing to doAs</li> <li>Mapping WebDAV usernames to Kerberos identities</li> <li>Restricting HDFS access based on LDAP groups</li> </ul>"},{"location":"provider/webhdfs/#current-limitations-todo","title":"Current Limitations / TODO","text":"Feature Status Notes <code>PROPPATCH</code> Not supported Add stub or raise <code>NotImplementedError</code> Directory Quotas Not handled Optional <code>XAttr</code> / ACLs Not implemented Not part of base WebDAV spec <p>Feel free to contribute PRs to improve these areas.</p>"},{"location":"reference/cli/","title":"Command Line Interface","text":""},{"location":"reference/cli/#command-line-interface-args","title":"Command Line Interface Args","text":"<ul> <li>Introduced in 0.8</li> <li>Last updated in 1.0</li> </ul> <pre><code>python -m asgi_webdav --help\nUsage: python -m asgi_webdav [OPTIONS]\n\n  Run ASGI WebDAV server\n\nOptions:\n  -V, --version                   Print version info and exit.\n  -H, --host TEXT                 Bind socket to this host.  [default:\n                                  127.0.0.1]\n  -P, --port INTEGER              Bind socket to this port.  [default: 8000]\n  -c, --config TEXT               Load configuration from file.  [default:\n                                  None]\n  -u, --user &lt;TEXT TEXT&gt;...       Administrator username/password. [default:\n                                  username password]\n  -r, --root-path TEXT            Mapping provider URI to path '/'. [default:\n                                  None]\n  --logging-display-datetime / --logging-no-display-datetime\n                                  Turn on datetime in logging\n  --logging-use-colors / --logging-no-use-colors\n                                  Turn on color in logging\n  --dev                           Enter Development(for coding) mode, DON'T\n                                  use it in production!\n  --litmus                        Enter Litmus(for test) mode, DON'T use it in\n                                  production!\n  --help                          Show this message and exit.\n</code></pre>"},{"location":"reference/cli/#example","title":"Example","text":"<pre><code>python -m asgi_webdav --root-path .\n2022-02-26 16:48:41,857 INFO: [asgi_webdav.server] ASGI WebDAV Server(v0.9.1) starting...\n2022-02-26 16:48:41,857 INFO: [asgi_webdav.auth] Register User: username, allow:[''], deny:[]\n2022-02-26 16:48:41,857 INFO: [asgi_webdav.web_dav] Mapping Prefix: / =&gt; file://.\n2022-02-26 16:48:42,272 INFO: [asgi_webdav.server] ASGI WebDAV Server running on http://127.0.0.1:8000 (Press CTRL+C to quit)\n</code></pre> <p>username is <code>username</code>, password is <code>password</code>, map <code>.</code> to <code>http://localhost:8000</code></p>"},{"location":"reference/config-file/","title":"Config File","text":""},{"location":"reference/config-file/#webdavtoml-file","title":"<code>webdav.toml</code> file","text":""},{"location":"reference/config-file/#convert-json-to-toml","title":"Convert <code>.json</code> to <code>.toml</code>","text":"<p>please search <code>convert json toml</code> in your browser.</p>"},{"location":"reference/config-file/#when-the-file-does-not-exist","title":"When the file does not exist","text":"<p>When the file <code>/data/webdav.toml(.json)</code> does not exist, <code>http://127.0.0.1/</code> will map to the <code>/data</code> directory.</p>"},{"location":"reference/config-file/#logging-output","title":"logging output","text":"<pre><code>WARNING: load config value from file[/data/webdav.json] failed, [Errno 2] No such file or directory: '/data/webdav.json'\nINFO: [asgi_webdav.webdav] ASGI WebDAV(v0.3.1) starting...\nINFO: [asgi_webdav.distributor] Mapping Prefix: / =&gt; file:///data\nINFO: [asgi_webdav.auth] Register Account: username, allow:[''], deny:[]\nINFO: [uvicorn] Started server process [7]\nINFO: [uvicorn] Uvicorn running on http://0.0.0.0:80 (Press CTRL+C to quit)\n</code></pre>"},{"location":"reference/config-file/#when-the-file-exists","title":"When the file exists","text":"<p>When the file exists, the mapping relationship is defined by the file content.</p>"},{"location":"reference/config-file/#example","title":"Example","text":"<pre><code>[[account_mapping]]\nusername = \"username\"\npassword = \"password\"\npermissions = [ \"+\" ]\n\n[[account_mapping]]\nusername = \"litmus\"\npassword = \"password\"\npermissions = [ \"+^/$\", \"+^/litmus\", \"-^/litmus/other\" ]\n\n[[account_mapping]]\nusername = \"guest\"\npassword = \"password\"\npermissions = [ ]\n\n[anonymous]\nenable = true\n\n[[provider_mapping]]\nprefix = \"/\"\nuri = \"file:///data/root\"\nread_only = true\n\n[[provider_mapping]]\nprefix = \"/provider\"\nuri = \"memory:///\"\nread_only = true\n\n[[provider_mapping]]\nprefix = \"/provider/fs\"\nuri = \"file:///data/litmus\"\n\n[[provider_mapping]]\nprefix = \"/provider/memory\"\nuri = \"memory:///\"\nignore_property_extra = false\n\n[[provider_mapping]]\nprefix = \"/~\"\nuri = \"file:///data/home\"\nhome_dir = true\n</code></pre> <p>More example please check <code>examples/config/*.toml</code> in codebase.</p>"},{"location":"reference/config-file/#logging-output_1","title":"logging output","text":"<pre><code>INFO: [asgi_webdav.server] ASGI WebDAV Server(v1.3.2) starting...\nINFO: [asgi_webdav.auth] Register Account: username, allow:[''], deny:[]\nINFO: [asgi_webdav.auth] Register Account: litmus, allow:['^/$', '^/litmus'], deny:['^/litmus/other']\nINFO: [asgi_webdav.auth] Register Account: guest, allow:[], deny:[]\nINFO: [asgi_webdav.auth] Register Account: anonymous, allow:['^/public'], deny:[]\nINFO: [asgi_webdav.web_dav] Mapping Prefix: / --[ReadOnly]--&gt; file:///data/root\nINFO: [asgi_webdav.web_dav] Mapping Prefix: /provider --[ReadOnly]--&gt; memory:///\nINFO: [asgi_webdav.web_dav] Mapping Prefix: /provider/fs --&gt; file:///tmp\nINFO: [asgi_webdav.web_dav] Mapping Prefix: /provider/memory --&gt; memory:///\nINFO: [asgi_webdav.web_dav] Mapping Prefix: /~ --[Home]--&gt; file:///data/home/{user name}\nINFO: [asgi_webdav.server] ASGI WebDAV Server running on http://localhost:8000 (Press CTRL+C to quit)\n</code></pre>"},{"location":"reference/config-file/#config-object","title":"<code>Config</code> Object","text":"<p>root object</p> <ul> <li>Introduced in 0.1</li> <li>Last updated in 1.6.0</li> </ul> Key Use For Value Type Default Value account_mapping auth <code>list[User]</code> <code>[]</code> anonymous auth <code>Anonymous</code> <code>Anonymous()</code> http_basic_auth auth <code>HTTPBasicAuth</code> <code>HTTPBasicAuth()</code> http_digest_auth auth <code>HTTPDigestAuth</code> <code>HTTPDigestAuth()</code> provider_mapping mapping <code>list[Provider]</code> <code>[]</code> hide_file_in_dir rules <code>HideFileInDir</code> <code>HideFileInDir()</code> guess_type_extension rules <code>GuessTypeExtension</code> <code>GuessTypeExtension()</code> text_file_charset_detect rules <code>TextFileCharsetDetect</code> <code>TextFileCharsetDetect()</code> compression response <code>Compression</code> <code>Compression()</code> cors response <code>CORS</code> <code>CORS()</code> enable_dir_browser response <code>bool</code> <code>true</code> logging other <code>Logging</code> <code>\"Logging()\"</code> sentry_dsn other <code>str</code> <code>None</code>"},{"location":"reference/config-file/#for-authentication","title":"for Authentication","text":""},{"location":"reference/config-file/#user-object","title":"<code>User</code> Object","text":"<ul> <li>Introduced in 0.3.1</li> <li>Last updated in 0.7</li> </ul> Key Value Type Default Value username str - password str - permissions list[str] <code>[]</code> admin bool <code>false</code> <ul> <li>When the value of <code>admin</code> is <code>true</code>, the user can access the web page <code>/_/admin/xxx</code></li> </ul>"},{"location":"reference/config-file/#permissions-formatexample","title":"<code>Permissions</code> Format/Example","text":"<ul> <li>Introduced in 0.3.1</li> <li>Last updated in 0.3.1</li> </ul> Value Allow Deny <code>[\"+\"]</code> Any - <code>[\"-\"]</code> - Any <code>[\"+^/$\"]</code> <code>/</code> <code>/path</code> <code>[\"+^/path\"]</code> <code>/path</code>,<code>/path/sub</code> <code>/other</code> <code>[\"+^/path\", \"-^/path/sub2\"]</code> <code>/path</code>,<code>/path/sub1</code> <code>/path/sub2</code>"},{"location":"reference/config-file/#anonymous-object","title":"<code>Anonymous</code> Object","text":"<ul> <li>Introduced in 1.6</li> <li>Last updated in 1.6</li> </ul> Key Value Type Default Value enable bool <code>false</code> user <code>User</code> <code>User(\"anonymous\", \"\", [\"+\"])</code> allow_missing_auth_header bool <code>true</code> <ul> <li>Anonymous accounts can be authenticated via HTTP header at any time, just like normal users.</li> <li>If <code>allow_missing_auth_header</code> is <code>true</code>, anonymous requests will be treated as being requested by an anonymous account.</li> </ul> <p>More detail, please see howto.</p>"},{"location":"reference/config-file/#httpbasicauth-object","title":"<code>HTTPBasicAuth</code> Object","text":"<ul> <li>Introduced in 1.5</li> <li>Last updated in 1.6</li> </ul> Key Value Type Default Value Changed cache_type str <code>memory</code> v1.5 cache_timeout int <code>-1</code> v1.5"},{"location":"reference/config-file/#cache_type-allowed-value","title":"<code>cache_type</code> allowed value","text":"<ul> <li><code>bypass</code></li> <li><code>memory</code></li> <li><code>expiring</code></li> </ul>"},{"location":"reference/config-file/#cache_timeout","title":"<code>cache_timeout</code>","text":"<ul> <li>Unit: second</li> <li>Supported <code>cache_type</code>:</li> <li><code>expiring</code></li> </ul> Value Meaning -1 cache does not expire (default) 0 cache is disabled &gt;0 seconds until each cache entry expires"},{"location":"reference/config-file/#httpdigestauth-object","title":"<code>HTTPDigestAuth</code> Object","text":"<ul> <li>Introduced in 0.7</li> <li>Last updated in 0.9</li> </ul> Key Value Type Default Value enable bool <code>false</code> enable_rule str `` disable_rule str <code>neon/</code> <ul> <li>When <code>enable</code> is <code>true</code>, the <code>disable_rule</code> is valid</li> <li>When <code>enable</code> is <code>false</code>, the <code>enable_rule</code> is valid</li> </ul>"},{"location":"reference/config-file/#for-url-mapping","title":"for URL Mapping","text":""},{"location":"reference/config-file/#provider-object","title":"<code>Provider</code> Object","text":"<ul> <li>Introduced in 0.1</li> <li>Last updated in 1.6</li> </ul> Key Value Type Default Value prefix str - uri str - type str <code>\"\"</code> home_dir bool <code>false</code> read_only bool <code>false</code> ignore_property_extra bool <code>true</code> <ul> <li>When <code>read_only</code> is <code>true</code>; it is a read only directory, include subdirectories.</li> <li>When <code>ignore_property_extra</code> is <code>true</code>; The Provider ignores the extra property, based on the Provider's implementation.</li> </ul>"},{"location":"reference/config-file/#provider-type","title":"Provider Type","text":"<ul> <li>Some providers require a <code>type</code> to ensure proper identification. eg: <code>webhdfs</code></li> </ul> Provider Type Required FileSystemProvider <code>fs</code> - MemoryProvider <code>memory</code> - WebHDFSProvider <code>webhdfs</code> +"},{"location":"reference/config-file/#home-directory","title":"Home Directory","text":"<ul> <li>When <code>home_dir</code> is <code>true</code>, it is the home directory. The <code>prefix</code> recommends using <code>/~</code> or <code>/home</code>.</li> <li>When <code>home_dir</code> is <code>true</code> and <code>prefix</code> is <code>/~</code> and <code>uri</code> is <code>file:///data/homes</code> and <code>username</code> is <code>user_x</code>   ; <code>http://webdav.host/~/path</code> will map to <code>file:///data/homes/user_x/path</code>.</li> </ul>"},{"location":"reference/config-file/#for-rules-process","title":"for Rules Process","text":""},{"location":"reference/config-file/#hidefileindir-object","title":"<code>HideFileInDir</code> Object","text":"<ul> <li>Introduced in 1.0</li> <li>Last updated in 1.0</li> </ul> Key Value Type Default Value Example enable bool <code>true</code> - enable_default_rules bool <code>true</code> - user_rules dict <code>{}</code> <code>like default</code>"},{"location":"reference/config-file/#guesstypeextension-object","title":"<code>GuessTypeExtension</code> Object","text":"<ul> <li>Introduced in 0.4</li> <li>Last updated in 0.4</li> </ul> Key Value Type Default Value Example enable bool <code>true</code> - enable_default_mapping bool <code>true</code> - filename_mapping dict[str, str] <code>{}</code> <code>{\"README\": \"text/plain\"}</code> suffix_mapping dict[str, str] <code>{}</code> <code>{\".md\": \"text/plain\"}</code>"},{"location":"reference/config-file/#textfilecharsetdetect-object","title":"<code>TextFileCharsetDetect</code> Object","text":"<ul> <li>Introduced in 0.5</li> <li>Last updated in 0.5</li> </ul> Key Value Type Default Value enable bool <code>false</code> default str <code>\"utf-8\"</code>"},{"location":"reference/config-file/#for-response","title":"for Response","text":""},{"location":"reference/config-file/#compression-object","title":"<code>Compression</code> Object","text":"<ul> <li>Introduced in 0.5</li> <li>Last updated in 1.6</li> </ul> Key Value Type Default Value Changed Example enable bool <code>true</code> v1.6 - enable_gzip bool <code>true</code> v0.5 - enable_zstd bool <code>true</code> v0.5 - level DAVCompressLevel <code>\"recommend\"</code> v0.5 <code>\"fast\"</code>/<code>\"recommend\"</code>/<code>\"best\"</code> content_type_user_rule str <code>\"\"</code> v0.5 <code>\"^application/xml$&amp;#124;^text/\"</code>"},{"location":"reference/config-file/#compresslevel-object","title":"<code>CompressLevel</code> Object","text":"<ul> <li>Introduced in 0.5</li> <li>Last updated in 1.7</li> </ul> DAVCompressLevel Gzip Level Zstd Level fast 1 1 recommend 4 3 best 9 19"},{"location":"reference/config-file/#cors-object","title":"<code>CORS</code> Object","text":"<ul> <li>Introduced in 1.1</li> <li>Last updated in 1.1</li> </ul> Key Value Type Default Value Example enable bool <code>false</code> - allow_url_regex str <code>None</code> <code>^/cors/path</code> allow_origins list[str] <code>[]</code> <code>[\"*\"]</code> or <code>[\"https://example.com\",\"http://localhost\"]</code> allow_origin_regex str <code>None</code> <code>^https://.*\\.example\\.com$</code> allow_methods list[str] <code>[\"GET\"]</code> - allow_headers list[str] <code>[]</code> <code>[\"*\"]</code> or <code>[\"I-Am-Example-Header,\"Me-Too\"]</code> allow_credentials bool <code>false</code> - expose_headers list[str] <code>[]</code> - preflight_max_age int <code>600</code> -"},{"location":"reference/config-file/#logging-object","title":"<code>logging</code> Object","text":"<ul> <li>Introduced in 1.4</li> <li>Last updated in 1.4</li> </ul> Key Value Type Default Value enable bool <code>true</code> level str <code>\"INFO\"</code> display_datetime bool <code>true</code> use_colors bool <code>true</code>"},{"location":"reference/config/","title":"Configuration","text":""},{"location":"reference/config/#config-value-priority","title":"Config Value Priority","text":"<p>Command Line Interface Args &gt; Environment Variable &gt; Configuration File &gt; Default Value</p>"},{"location":"reference/env-value/","title":"Environment Variables","text":""},{"location":"reference/env-value/#common","title":"Common","text":"Name Default Value Config Object WEBDAV_LOGGING_LEVEL INFO <code>Config.logging_level</code> WEBDAV_USERNAME username <code>Config.account_mapping</code> WEBDAV_PASSWORD password <code>Config.account_mapping</code>"},{"location":"reference/env-value/#docker-specific","title":"Docker Specific","text":"Name Default Value WEBDAV_HOST <code>0.0.0.0</code> WEBDAV_PORT <code>8000</code> WEBDAV_CONFIGFILE <code>/data/webdav.toml</code>"},{"location":"reference/misc/","title":"Miscellaneous","text":""},{"location":"reference/misc/#davprovider","title":"DAVProvider","text":"DAVProvider URI FileProvider <code>file:///your/path</code> data is stored in the file system MemoryProvider <code>memory:///</code> data is stored in the memory"},{"location":"reference/misc/#web-dir-browser","title":"Web dir browser","text":"<p>Default enabled</p>"},{"location":"zh/","title":"\u6982\u89c8","text":"<p>\u4e00\u4e2a\u57fa\u4e8e Python asyncio \u7684\u5f02\u6b65 WebDAV \u670d\u52a1\u7aef\u5b9e\u73b0\uff1b\u652f\u6301\u591a\u6765\u6e90\u3001\u591a\u8d26\u53f7\u548c\u6743\u9650\u63a7\u5236\u7b49</p>"},{"location":"zh/#_2","title":"\u7279\u6027","text":"<ul> <li>\u7b26\u5408 ASGI \u6807\u51c6</li> <li>\u7b26\u5408 WebDAV \u6807\u51c6: RFC4918</li> <li>\u652f\u6301\u591a\u6765\u6e90: FileSystemProvider, MemoryProvider, WebHDFSProvider</li> <li>\u652f\u6301\u591a\u8d26\u53f7\u4ee5\u53ca\u6743\u9650\u63a7\u5236</li> <li>\u652f\u6301\u53ef\u9009\u7684\u533f\u540d\u7528\u6237</li> <li>\u652f\u6301\u53ef\u9009\u7684\u5bb6\u76ee\u5f55</li> <li>\u652f\u6301\u5c06\u5bc6\u7801\u4ee5 \u539f\u59cb/hashlib/LDAP(\u8bd5\u9a8c\u6027\u7279\u6027) \u65b9\u5f0f\u5b58\u50a8</li> <li>\u5b8c\u6574\u7684\u5f02\u6b65\u6587\u4ef6 IO</li> <li>\u901a\u8fc7 WebDAV \u5b98\u65b9\u7684 litmus(0.13) \u6d4b\u8bd5, \u4ec5\u6709\u4e24\u4e2a\u8b66\u544a</li> <li>\u53ef\u5728\u6d4f\u89c8\u5668\u4e2d\u6d4f\u89c8\u6587\u4ef6\u76ee\u5f55</li> <li>\u652f\u6301 HTTP Basic/Digest \u8ba4\u8bc1</li> <li>\u652f\u6301 Gzip/Zstd \u538b\u7f29</li> <li>\u517c\u5bb9 macOS \u8bbf\u8fbe/ Window10   Explorer \u7b49\u5ba2\u6237\u7aef</li> </ul>"},{"location":"zh/#_3","title":"\u7b80\u5355\u5c1d\u8bd5","text":"<pre><code>docker pull ray1ex/asgi-webdav\ndocker run -dit --restart unless-stopped \\\n  -p 8000:8000 \\\n  -e UID=1000 -e GID=1000 \\\n  -v /your/data:/data \\\n  --name asgi-webdav ray1ex/asgi-webdav\n</code></pre>"},{"location":"zh/#_4","title":"\u9ed8\u8ba4\u8d26\u53f7","text":"\u503c \u8bf4\u660e \u7528\u6237\u540d <code>username</code> - \u5bc6\u7801 <code>password</code> - \u6743\u9650 <code>[\"+\"]</code> \u5141\u8bb8\u8bbf\u95ee\u6240\u6709\u76ee\u5f55"},{"location":"zh/#_5","title":"\u5728\u6d4f\u89c8\u5668\u5217\u51fa\u6587\u4ef6\u76ee\u5f55","text":""},{"location":"zh/quick-start-in-docker/","title":"Docker \u73af\u5883\u7b80\u660e\u624b\u518c","text":""},{"location":"zh/quick-start-in-docker/#docker_1","title":"\u4e0b\u8f7d Docker \u955c\u50cf","text":"<pre><code>docker pull ray1ex/asgi-webdav:latest\n</code></pre>"},{"location":"zh/quick-start-in-docker/#_1","title":"\u96f6\u914d\u7f6e\u4f53\u9a8c\uff0c\u5168\u9ed8\u8ba4\u914d\u7f6e\u542f\u52a8","text":""},{"location":"zh/quick-start-in-docker/#_2","title":"\u521b\u5efa\u5e76\u542f\u52a8\u5bb9\u5668","text":"<pre><code>docker run --restart always -p 0.0.0.0:8000:8000 \\\n  -v /your/data:/data \\\n  --name asgi-webdav ray1ex/asgi-webdav\n</code></pre>"},{"location":"zh/quick-start-in-docker/#_3","title":"\u914d\u7f6e\u8bf4\u660e","text":"<p>\u56e0\u4e3a\u5728 <code>/your/data</code> \u4e0b\u6ca1\u6709 <code>webdav.json</code> \u6587\u4ef6\uff0c\u6240\u4ee5\u4f1a\u4ee5\u5168\u9ed8\u8ba4\u914d\u7f6e\u542f\u52a8\u3002\u6839\u76ee\u5f55\u5bf9\u5e94<code>/your/data</code>\uff1b\u53ea\u6709\u4e00\u4e2a\u8d26\u53f7\uff0c\u7528\u6237\u540d<code>username</code>\uff0c\u5bc6\u7801<code>password</code>\uff0c\u6743\u9650\u65e0\u9650\u5236\u3002</p>"},{"location":"zh/quick-start-in-docker/#_4","title":"\u81ea\u5b9a\u4e49/\u591a\u8d26\u53f7","text":""},{"location":"zh/quick-start-in-docker/#_5","title":"\u521b\u5efa\u914d\u7f6e\u6587\u4ef6","text":"<p>\u521b\u5efa\u6587\u4ef6 <code>/your/data/webdav.json</code>\uff0c\u4fee\u6539\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b</p> <pre><code>{\n    \"account_mapping\": [\n        {\n            \"username\": \"user_all\",\n            \"password\": \"pw1\",\n            \"permissions\": [\n                \"+\"\n            ]\n        },\n        {\n            \"username\": \"user_litmus\",\n            \"password\": \"pw2\",\n            \"permissions\": [\n                \"+^/$\",\n                \"+^/litmus\",\n                \"-^/litmus/other\"\n            ]\n        },\n        {\n            \"username\": \"guest\",\n            \"password\": \"pw3\",\n            \"permissions\": []\n        }\n    ]\n}\n</code></pre> <p>\u6587\u4ef6\u683c\u5f0f\u4e3a JSON\uff1b\u5728\u6700\u540e\u4e00\u4e2a\u5927\u62ec\u5f27\u548c\u65b9\u62ec\u5f27\u540e\u9762\u4e0d\u80fd\u6709\u9017\u53f7\uff1b \u5176\u4e2d <code>permissions</code> \u5217\u8868\u5185\u7684\u683c\u5f0f\u4e3a\u6b63\u5219\u8868\u8fbe\u5f0f</p>"},{"location":"zh/quick-start-in-docker/#_6","title":"\u914d\u7f6e\u8bf4\u660e","text":"<p>\u91cd\u542f docker \u5bb9\u5668\u540e\u751f\u6548\uff0c\u91cd\u542f\u540e\u751f\u6548\u4e09\u4e2a\u8d26\u53f7\uff1a</p> <ul> <li><code>user_all</code> \u7684\u5bc6\u7801\u4e3a <code>pw1</code>\uff0c\u6743\u9650\u4e3a\u5141\u8bb8\u8bbf\u95ee\u6240\u6709 URL</li> <li><code>user_litmus</code>\u7684\u5bc6\u7801\u4e3a<code>pw2</code><ul> <li>\u5141\u8bb8\u8bbf\u95ee<ul> <li>URL <code>/</code></li> <li>URL<code>/litmus</code>\u4ee5\u53ca\u5176\u5b50\u76ee\u5f55</li> </ul> </li> <li>\u7981\u6b62\u8bbf\u95ee<ul> <li>URL<code>/litmus/other</code>\u4ee5\u53ca\u5176\u5b50\u76ee\u5f55</li> </ul> </li> </ul> </li> <li><code>guest</code>\u7684\u5bc6\u7801\u4e3a<code>pw3</code>\uff0c\u65e0\u4efb\u4f55 URL \u8bbf\u95ee\u6743\u9650</li> </ul> <p>\u6743\u9650\u89c4\u5219\u4e0d\u5206\u8bfb\u5199\uff1b\u5bf9\u67d0\u4e2a URL \u6709\u6743\u9650\uff0c\u65e2\u8868\u793a\u5bf9\u6b64 URL \u4e0b\u7684\u6587\u4ef6\u548c\u5b50\u8def\u5f84\u5747\u6709\u8bfb\u5199\u6743\u9650\uff0c\u5e76\u53ef\u5217\u51fa\u6b64\u8def\u5f84\u4e0b\u6240\u6709\u6210\u5458</p>"},{"location":"zh/quick-start-in-docker/#_7","title":"\u66f4\u590d\u6742\u7684\u5171\u4eab\u76ee\u5f55\u8bbe\u7f6e/\u6620\u5c04","text":""},{"location":"zh/quick-start-in-docker/#_8","title":"\u4fee\u6539\u914d\u7f6e\u6587\u4ef6","text":"<p>\u6587\u4ef6 <code>/your/data/webdav.json</code> \u5185\u5bb9\u5982\u4e0b</p> <pre><code>{\n    \"account_mapping\": [\n        {\n            \"username\": \"username\",\n            \"password\": \"password\",\n            \"permissions\": [\n                \"+\"\n            ]\n        }\n    ],\n    \"provider_mapping\": [\n        {\n            \"prefix\": \"/\",\n            \"uri\": \"file:///data/root\"\n        },\n        {\n            \"prefix\": \"/litmus\",\n            \"uri\": \"memory:///\"\n        },\n        {\n            \"prefix\": \"/litmus/fs\",\n            \"uri\": \"file:///data/other\"\n        },\n        {\n            \"prefix\": \"/litmus/memory\",\n            \"uri\": \"memory:///\"\n        }\n    ]\n}\n</code></pre>"},{"location":"zh/quick-start-in-docker/#_9","title":"\u521b\u5efa\u5e76\u542f\u52a8\u5bb9\u5668","text":"<pre><code>docker run --restart always -p 0.0.0.0:8000:8000 \\\n  -v /your/data:/data -v /your/data/other:/data/other \\\n  --name asgi-webdav ray1ex/asgi-webdav\n</code></pre>"},{"location":"zh/quick-start-in-docker/#_10","title":"\u914d\u7f6e\u8bf4\u660e","text":"<p>\u5171\u4eab\u76ee\u5f55\u8def\u5f84\u5bf9\u5e94\u8868</p> HTTP \u8def\u5f84 Docker \u5bb9\u5668\u5185\u8def\u5f84 \u5bbf\u4e3b\u673a\u5668\u8def\u5f84 <code>/</code> <code>/data/root</code> <code>/your/data/root</code> <code>/litmus</code> \u5185\u5b58\u533a\u57dfA <code>/litmus/fs</code> <code>/data/other</code> <code>/your/data/other</code> <code>/litmus/memory</code> \u5185\u5b58\u533a\u57dfB <p>\u5982\u679c\u4e0d\u5728\u5bbf\u4e3b\u673a\u4e0a\u521b\u5efa <code>/your/data/root</code>\u8fd9\u4e2a\u8def\u5f84\uff0c\u7cfb\u7edf\u4e5f\u53ef\u4ee5\u5de5\u4f5c\uff1b\u4f46\u8bbf\u95ee <code>/</code> \u8fd9\u4e2a URL \u53ea\u4f1a\u5f97\u5230\u4e00\u4e2a 404 \u9519\u8bef</p>"},{"location":"zh/quick-start-in-docker/#_11","title":"\u5bb6\u76ee\u5f55","text":""},{"location":"zh/quick-start-in-docker/#_12","title":"\u4fee\u6539\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>{\n    \"account_mapping\": [\n        {\n            \"username\": \"user_a\",\n            \"password\": \"password\",\n            \"permissions\": [\n                \"+\"\n            ]\n        },\n        {\n            \"username\": \"user_b\",\n            \"password\": \"password\",\n            \"permissions\": []\n        }\n    ],\n    \"provider_mapping\": [\n        {\n            \"prefix\": \"/\",\n            \"uri\": \"file:///data/root\"\n        },\n        {\n            \"prefix\": \"/~\",\n            \"uri\": \"file:///data/homes\",\n            \"home_dir\": true\n        }\n    ]\n}\n</code></pre>"},{"location":"zh/quick-start-in-docker/#_13","title":"\u521b\u5efa\u5e76\u542f\u52a8\u5bb9\u5668","text":"<pre><code>docker run --restart always -p 0.0.0.0:8000:8000 \\\n  -v /your/data:/data -v /your/data/homes:/data/homes \\\n  --name asgi-webdav ray1ex/asgi-webdav\n</code></pre>"},{"location":"zh/quick-start-in-docker/#_14","title":"\u914d\u7f6e\u8bf4\u660e","text":"<p>\u5bb6\u76ee\u5f55\u8def\u5f84\u5bf9\u5e94\u8868</p> \u7528\u6237 URL Docker \u5bb9\u5668\u5185\u8def\u5f84 \u5bbf\u4e3b\u673a\u5668\u8def\u5f84 <code>user_a</code> <code>/~</code> <code>/data/homes/user_a</code> <code>/your/data/homes/user_a</code> <code>user_a</code> <code>/~/sub</code> <code>/data/homes/user_a/sub</code> <code>/your/data/homes/user_a/sub</code> <code>user_b</code> <code>/~</code> <code>/data/homes/user_b</code> <code>/your/data/homes/user_b</code> <code>user_b</code> <code>/~/sub</code> <code>/data/homes/user_b/sub</code> <code>/your/data/homes/user_b/sub</code> <ul> <li>\u5982\u679c\u7528\u6237\u5bf9\u5e94\u7684\u540c\u540d\u5b50\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u4f1a\u5bfc\u81f4\u8bf7\u6c42\u5bb6\u76ee\u5f55\u65f6\u5931\u8d25\u3002\u8bf7\u81ea\u884c\u5728\u5bbf\u4e3b\u673a\u4e0a\u521b\u5efa <code>/your/data/homes/user_a</code> \u7b49\u8def\u5f84</li> <li>\u5373\u4fbf\u4e00\u4e2a\u7528\u6237\u6ca1\u6709\u4efb\u4f55\u5171\u4eab\u76ee\u5f55\u7684\u8bbf\u95ee\u6743\u9650\uff0c\u4e5f\u6709\u6743\u8bbf\u95ee\u81ea\u5df1\u7684\u6240\u6709\u5bb6\u76ee\u5f55</li> <li>\u7cfb\u7edf\u5141\u8bb8\u591a\u4e2a\u5bb6\u76ee\u5f55\u540c\u65f6\u5b58\u5728\uff0c\u6bd4\u5982\uff1a<code>/~</code> <code>/home</code></li> </ul>"},{"location":"zh/quick-start-in-docker/#_15","title":"\u94fe\u63a5\u5ba2\u6237\u7aef","text":"<p>\u4ee5\u4e0b\u4ee5\u670d\u52a1\u7aef\u7f51\u5740\u4e3a <code>https://your.domain.com</code> \u4e3a\u4f8b\uff1b\u5b9e\u9645\u66f4\u5e38\u89c1\u7684\u7f51\u5740\u4e00\u822c\u4e3a <code>https://your.domain.com/my/dav/sub/dir/path</code></p> <p>\u5982\u679c\u4f60\u7684 WebDAV \u6839\u8def\u5f84\u4e3a <code>https://domain</code> \u5728 WebDAV \u6839\u76ee\u5f55\u4e0b\u5206\u522b\u6709 <code>/path1</code> <code>/path1/sub1</code> <code>/path2</code> \u8fd9\u51e0\u4e2a\u5b50\u76ee\u5f55\uff1b\u90a3\u4e48\u94fe\u63a5\u7684\u65f6\u5019\u5206\u522b\u4f7f\u7528 <code>https://domain</code> <code>https://domain/path1</code> <code>https://domain/path1/sub1</code> <code>https://domain/path2</code> \u90fd\u662f\u53ef\u4ee5\u7684</p>"},{"location":"zh/quick-start-in-docker/#macos","title":"macOS","text":"<p>\u5728 <code>\u8bbf\u8fbe/Finder</code> \u7684\u83dc\u5355 <code>\u524d\u5f80</code>-<code>\u8fde\u63a5\u670d\u52a1\u5668...</code>\uff1b\u7136\u540e\u5728\u5f39\u51fa\u7a97\u53e3\u4e2d\u8f93\u5165 <code>https://your.domain.com/any/webdav/path</code>\uff1b\u7136\u540e\u70b9\u51fb <code>\u8fde\u63a5</code> \uff1b\u8f93\u5165\u7528\u6237\u540d/\u5bc6\u7801\u5373\u53ef</p>"},{"location":"zh/quick-start-in-docker/#windows","title":"Windows","text":"<p>\u5728 <code>\u6587\u4ef6\u7ba1\u7406\u5668</code> \u5de6\u680f <code>\u7f51\u7edc</code> \u5904\u70b9\u51fb\u9f20\u6807 <code>\u53f3\u952e</code>\uff1b\u9009\u62e9 <code>\u6620\u5c04\u7f51\u7edc\u9a71\u52a8\u5668</code>\uff1b\u5728 <code>\u6587\u4ef6\u5939</code> \u680f\u76ee\u8f93\u5165 <code>https://your.domain.com</code>\uff1b\u7136\u540e\u70b9\u51fb <code>\u5b8c\u6210</code>\uff1b\u8f93\u5165\u7528\u6237\u540d/\u5bc6\u7801\u5373\u53ef</p>"},{"location":"zh/quick-start-in-docker/#_16","title":"\u6742\u6280","text":""},{"location":"zh/quick-start-in-docker/#window","title":"Window \u8d44\u6e90\u7ba1\u7406\u5668\"\u6620\u5c04\u7f51\u7edc\u9a71\u52a8\u5668\"","text":"<p>\u5f53\u8d44\u6e90\u7ba1\u7406\u5668\u6620\u4f7f\u7528 WebDAV \u5c04\u7f51\u7edc\u78c1\u76d8\u7684\u65f6\u5019\uff0c\u5982\u679c\u670d\u52a1\u7aef\u63d0\u4f9b\u7684\u662f HTTP \u94fe\u63a5\u800c\u975e HTTPS \u94fe\u63a5\uff0c\u540c\u65f6\u670d\u52a1\u7aef\u4e0d\u4e3b\u52a8\u63d0\u4f9b Digest \u8ba4\u8bc1\u7684\u60c5\u51b5\u4e0b\u4f1a\u5bfc\u81f4\u6620\u5c04\u5931\u8d25(HTTPS \u73af\u5883\u652f\u6301 Basic \u8ba4\u8bc1\u65b9\u5f0f)</p> <p>\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u65b9\u6cd5\u5982\u4e0b:</p> <pre><code>{\n    \"http_digest_auth\": {\n        \"enable\": false,\n        \"enable_rule\": \"Microsoft-WebDAV-MiniRedir|\u5176\u4ed6\u5ba2\u6237\u7aefUserAgent\"\n    }\n}\n</code></pre>"},{"location":"zh/guide/cors/","title":"\u8de8\u6e90\u8d44\u6e90\u5171\u4eab (CORS)","text":""},{"location":"zh/guide/cors/#cors-origin","title":"\u6253\u5f00 CORS \u652f\u6301, \u5e76\u5141\u8bb8\u4efb\u610f Origin","text":"<pre><code>{\n    \"cors\": {\n        \"enable\": true,\n        \"allow_origins\": [\n            \"*\"\n        ]\n    }\n}\n</code></pre>"},{"location":"zh/guide/cors/#origin","title":"\u5141\u8bb8\u591a\u4e2a Origin","text":"<pre><code>{\n    \"cors\": {\n        \"enable\": true,\n        \"allow_origins\": [\n            \"https://i.am.origin.com\",\n            \"https://me.too.com\"\n        ]\n    }\n}\n</code></pre>"},{"location":"zh/guide/cors/#origin_1","title":"\u57fa\u4e8e\u6b63\u5219\u8868\u8fbe\u5f0f\u5141\u8bb8\u7684 Origin","text":"<pre><code>{\n    \"cors\": {\n        \"enable\": true,\n        \"allow_origin_regex\": \"^https://cors.*\"\n    }\n}\n</code></pre>"},{"location":"zh/guide/cors/#url","title":"\u57fa\u4e8e\u6b63\u5219\u8868\u8fbe\u5f0f\u5141\u8bb8\u7684 URL \u8303\u56f4","text":"<pre><code>{\n    \"cors\": {\n        \"enable\": true,\n        \"allow_url_regex\": \"^/cors/path.*\",\n        \"allow_origins\": [\n            \"*\"\n        ]\n    }\n}\n</code></pre>"},{"location":"zh/guide/cors/#http","title":"\u5141\u8bb8\u7684 HTTP \u65b9\u6cd5","text":"<pre><code>{\n    \"cors\": {\n        \"enable\": true,\n        \"allow_origins\": [\n            \"*\"\n        ],\n        \"allow_methods\": [\n            \"GET\",\n            \"HEAD\",\n            \"POST\"\n        ]\n    }\n}\n</code></pre>"}]}